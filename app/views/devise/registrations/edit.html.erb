<h2>Editar  <%= current_user.to_s.humanize %></h2>

<%= form_for(resource,
             :as => resource_name,
             :url => registration_path(resource_name),
             :html => { :method => :put, :class => 'form-horizontal' }) do |f| %>
  <%= devise_error_messages! %>
  <div class="control-group">
    <%= f.label 'Nome do usuário', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :username, :required => true, :placeholder => 'Nome do usuário' , :class => 'uneditable-input', :disabled => true,  :autofocus => true %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label 'Nome', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :first_name, :required => true, :placeholder => 'Nome', :autofocus => true %>
      <%= f.text_field :last_name, :required => true, :placeholder => 'Sobrenome', :autofocus => true %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label 'Email', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :email, :required => true, :type => :email, :placeholder => 'Email', :autofocus => true %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label 'Telefone', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :phone, :required => true, :placeholder => 'Telefone', :onkeypress => 'mask(this, mphone);', :onblur => 'mask(this, mphone);', :autofocus => true %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label 'Senha atual', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :current_password, :autocomplete => "off", :type => :password, :placeholder => 'Confirme sua senha atual', :required => true %>
      <%= link_to 'Change Password', '#' , :id => 'change_button' , :class => "btn btn-primary"%>
    </div>
  </div>
  <div id="change_password" class="control-group" >
    <%= f.label :password, :class => "col-sm-1 control-label" %>
    <div class="controls">
      <%= f.text_field :password, :type => :password, :required => false, :placeholder => 'Nova Senha' %>
    </div>
    <%= f.label 'Confirmation', :class => "col-sm-1 control-label" %>
    <div class="controls">
      <%= f.text_field :password_confirmation, :type => :password, :required => false, :placeholder => 'Confirmação de Senha' %>
    </div>
  </div>

  <div class="form-inputs">
    <%= f.submit 'Atualizar', :class => 'btn btn-primary' %>
  </div>
<% end %>

<p>Unhappy? <%= link_to "Cancel my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete %>.</p>

<%= link_to "Back", :back %>

<%= render 'utils/phone_number' %>
<script type="text/javascript">
  $('#change_password').hide();
  $('#change_button').click(function(){
    $('#change_password').toggle();
  });
</script>